(this.webpackJsonpits=this.webpackJsonpits||[]).push([[0],{40:function(e,t,a){e.exports=a(78)},45:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},73:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),s=(a(45),a(9)),i=a(13),l=a(3),u=a(6),m=function(e){return r.a.createElement("div",null,r.a.createElement("input",{className:"auth_input w-full border-b-2",type:e.type,name:e.name,onChange:e.onChange,value:e.value,placeholder:e.placeholder,onBlur:e.onblur}),r.a.createElement("div",{className:"auth_input_alert text-14 text-red-600"},e.alertMessage))},p=a(14),d=a.n(p),f=a(16),b=a(24),h=a.n(b);h.a.defaults.headers.post["Content-Type"]="application/json";var g={},O=h.a.create({timeout:5e3,onUploadProgress:function(e){document.body.style.cursor=e.loaded===e.total?"default":"progress"}});g.fire=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.request(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var v=g,E={local:"http://127.0.0.1:8080",dev:"https://its-api.herokuapp.com",prod:"https://its-api.herokuapp.com"},y="We don't recognize this email, please sign up to get started",j="Login fail. Please try again",w="Register fail. Please try again",_="This email address is already in use",P="This username is already in use",k={getMyProfile:function(){var e="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/profile/me?sessionId=").concat(localStorage.getItem("sessionId"),"&profileId=").concat(localStorage.getItem("profileId"));return v.fire({url:e,method:"GET"})},getProfileById:function(e){var t="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/profile?profileId=").concat(e);return v.fire({url:t,method:"GET"})}},S=k,N="Auth/AUTH_SUCCESS",I="Auth/AUTH_LOGOUT",x=function(e){return function(t){var a={username:e.username};e.sessionId&&localStorage.setItem("sessionId",e.sessionId),(0===e.profileId||e.profileId)&&localStorage.setItem("profileId",e.profileId),t({type:N,payload:a})}},C=function(){return function(e){localStorage.removeItem("sessionId"),localStorage.removeItem("profileId"),e({type:I})}},L={register:function(e){var t="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/session");return v.fire({url:t,method:"POST",data:e})},login:function(e){var t="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/session/login");return v.fire({url:t,method:"POST",data:e})},logout:function(){var e="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/session/logout?sessionId=").concat(localStorage.getItem("sessionId"));return v.fire({url:e,method:"DELETE"})},verifyEmail:function(e){var t="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/session/verify/email?email=").concat(e);return v.fire({url:t,method:"GET"})},verifyUsername:function(e){var t="".concat(E[Object({NODE_ENV:"production",PUBLIC_URL:"/its"}).REACT_APP_ENV],"/session/verify/username?username=").concat(e);return v.fire({url:t,method:"GET"})}},T=L,U="/login",A="/register",R="/dashboard",D=(a(68),Object(i.e)((function(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.AuthReducer})).username;return r.a.createElement("div",{className:"header flex justify-between items-center bg-blue-300"},r.a.createElement("div",{className:"text-28"},r.a.createElement(s.b,{to:R},"ITS")),r.a.createElement("div",{className:"header_link_container flex text-16"},r.a.createElement("div",{className:"header_link"},"Hi ".concat(a)),r.a.createElement("div",{className:"header_link cursor-pointer",onClick:function(){T.logout(),C()(t),e.history.push("/login")}},"Logout")))}))),B=function(e){return r.a.createElement("div",{className:"navSideBar bg-333"},"asdasd")},V=Object(i.e)((function(e){var t=Object(u.b)();return Object(n.useEffect)((function(){if(e.isLogined){if(!localStorage.getItem("sessionId"))return C()(t),void e.history.push("/login");S.getMyProfile().then((function(e){x(e.data)(t)}),(function(){C()(t),e.history.push("/login")}))}else if(localStorage.getItem("sessionId"))return void e.history.push("/dashboard")}),[]),r.a.createElement("div",{className:"layout min-h-screen flex flex-col"},e.isLogined?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"flex flex-grow"},r.a.createElement(B,null),e.children)):e.children)})),M=(a(70),function(e){return r.a.createElement(V,{isLogined:!1},r.a.createElement("div",{className:"auth_layout text-18 flex justify-center items-center w-full h-full min-h-screen bg-blue-400"},r.a.createElement("div",{className:"auth_form mx-auto w-full bg-white rounded"},r.a.createElement("div",{className:"auth_form_title text-blue-600 text-28 inline-block"},e.title),e.children,r.a.createElement(s.b,{className:"auth_bottom_link text-blue-600 text-14 block",to:e.linkTo},e.link),r.a.createElement("span",{className:"main_btn btn-active btn-sm inline-block".concat(e.buttonEnable?"":" disable"),onClick:e.handleSubmit},e.submitButtom))))}),G=a(19),H=a.n(G),W=Object(i.e)((function(e){var t=Object(u.b)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),p=Object(l.a)(i,2),d=p[0],f=p[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),g=h[0],O=h[1],v=Object(n.useState)(""),E=Object(l.a)(v,2),w=E[0],_=E[1],P=function(e){var t=e.target.name,a=e.target.value;switch(t){case"email":s(a);break;case"password":O(a)}},k=function(e){},S=[{name:"email",type:"text",value:c,placeholder:"Email",alertMessage:d},{name:"password",type:"password",value:g,placeholder:"Password",alertMessage:w}];return r.a.createElement(M,{title:"Login",link:"Don't have an account? Sign up now!",linkTo:A,submitButtom:"Login",handleSubmit:function(a){T.login({email:c,password:H()(g)}).then((function(a){var n=a.data;x(n)(t),e.history.push("/dashboard")}),(function(e){switch(e.response.status){case 401:_(j),f("");break;case 404:_(""),f(y);break;default:_(j),f("")}}))},buttonEnable:c&&g},S.map((function(e){return r.a.createElement(m,{key:e.name,name:e.name,type:e.type,onChange:P,value:e.value,placeholder:e.placeholder,alertMessage:e.alertMessage,onblur:k})})))})),F=Object(i.e)((function(e){var t=Object(u.b)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),p=Object(l.a)(i,2),b=p[0],h=p[1],g=Object(n.useState)(""),O=Object(l.a)(g,2),v=O[0],E=O[1],y=Object(n.useState)(""),j=Object(l.a)(y,2),k=j[0],S=(j[1],Object(n.useState)("")),N=Object(l.a)(S,2),I=N[0],C=N[1],L=Object(n.useState)(""),A=Object(l.a)(L,2),R=A[0],D=(A[1],Object(n.useState)("")),B=Object(l.a)(D,2),V=B[0],G=B[1],W=Object(n.useState)(""),F=Object(l.a)(W,2),J=F[0],q=F[1],z=function(e){var t=e.target.name,a=e.target.value;switch(t){case"email":s(a);break;case"password":E(a);break;case"confirm_username":C(a);break;case"username":G(a)}},K=function(){return c?T.verifyEmail(c).then((function(){return h(_),!1}),(function(){return h(""),!0})):(h(""),!1)},$=function(){return V?T.verifyUsername(V).then((function(){return q(P),!1}),(function(){return q(""),!0})):(q(""),!1)},Q=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,$();case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=9;break}X();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){T.register({email:c,password:H()(v),username:V}).then((function(a){var n=a.data;x(n)(t),e.history.push("/dashboard")}),(function(e){q(w)}))},Y=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.name,e.t0=a,e.next="email"===e.t0?4:"username"===e.t0?6:8;break;case 4:return K(),e.abrupt("break",9);case 6:return $(),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=[{name:"email",type:"text",value:c,placeholder:"Email",alertMessage:b},{name:"password",type:"password",value:v,placeholder:"Password",alertMessage:k},{name:"confirm_username",type:"password",value:I,placeholder:"Confirm passowrd",alertMessage:R},{name:"username",type:"text",value:V,placeholder:"Username",alertMessage:J}];return r.a.createElement(M,{title:"Register",link:"Already have an account? Log in now!",linkTo:U,submitButtom:"Register",handleSubmit:Q,buttonEnable:c&&v&&v===I&&V},Z.map((function(e){return r.a.createElement(m,{key:e.name,name:e.name,type:e.type,onChange:z,value:e.value,placeholder:e.placeholder,alertMessage:e.alertMessage,onblur:Y})})))})),J=function(){return r.a.createElement(V,{isLogined:!0},' "LOGIN_SUCCESS"')};a(73);var q=function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/its"})),r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{basename:"/"},r.a.createElement(i.a,{path:U,component:W}),r.a.createElement(i.a,{path:A,component:F}),r.a.createElement(i.a,{path:R,component:J}),r.a.createElement(i.a,{path:"/",exact:!0,component:W})))},z=a(12),K=a(38),$=a.n(K),Q=a(39),X=a(20),Y="Tasks/FETCH_TASK_SUCCESS";function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ee={tasks:[]};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){Object(X.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne={username:""};var re=Object(z.c)({TasksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Y:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){Object(X.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{tasks:e.tasks.concat(n)});default:return e}},AuthReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case N:return ae({},e,{username:n.username});case I:return ae({},e,{},ne);default:return e}}});var oe=Object(z.e)(re,function(){var e=[Q.a,$.a];return Object(z.d)(z.a.apply(void 0,e))}());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(u.a,{store:oe},r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.6987d544.chunk.js.map