(this.webpackJsonpits=this.webpackJsonpits||[]).push([[0],{40:function(e,t,a){e.exports=a(78)},45:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},73:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),s=(a(45),a(9)),i=a(13),l=a(3),u=a(6),m=function(e){return r.a.createElement("div",null,r.a.createElement("input",{className:"auth_input w-full border-b-2",type:e.type,name:e.name,onChange:e.onChange,value:e.value,placeholder:e.placeholder,onBlur:e.onblur}),r.a.createElement("div",{className:"auth_input_alert text-14 text-red-600"},e.alertMessage))},f=a(14),d=a.n(f),p=a(16),b=a(24),h=a.n(b);h.a.defaults.headers.post["Content-Type"]="application/json";var g={},v=h.a.create({timeout:5e3,onUploadProgress:function(e){document.body.style.cursor=e.loaded===e.total?"default":"progress"}});g.fire=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.request(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var O=g,y="https://its-api.herokuapp.com",j="We don't recognize this email, please sign up to get started",E="Login fail. Please try again",w="Register fail. Please try again",k="This email address is already in use",S="This username is already in use",I={getMyProfile:function(){var e="".concat(y,"/profile/me?sessionId=").concat(localStorage.getItem("sessionId"),"&profileId=").concat(localStorage.getItem("profileId"));return O.fire({url:e,method:"GET"})},getProfileById:function(e){var t="".concat(y,"/profile?profileId=").concat(e);return O.fire({url:t,method:"GET"})}},x=I,P="Auth/AUTH_SUCCESS",T="Auth/AUTH_LOGOUT",_=function(e){return function(t){var a={username:e.username};e.sessionId&&localStorage.setItem("sessionId",e.sessionId),(0===e.profileId||e.profileId)&&localStorage.setItem("profileId",e.profileId),t({type:P,payload:a})}},N=function(){return function(e){localStorage.removeItem("sessionId"),localStorage.removeItem("profileId"),e({type:T})}},C={register:function(e){var t="".concat(y,"/session");return O.fire({url:t,method:"POST",data:e})},login:function(e){var t="".concat(y,"/session/login");return O.fire({url:t,method:"POST",data:e})},logout:function(){var e="".concat(y,"/session/logout?sessionId=").concat(localStorage.getItem("sessionId"));return O.fire({url:e,method:"DELETE"})},verifyEmail:function(e){var t="".concat(y,"/session/verify/email?email=").concat(e);return O.fire({url:t,method:"GET"})},verifyUsername:function(e){var t="".concat(y,"/session/verify/username?username=").concat(e);return O.fire({url:t,method:"GET"})}},M=C,L="/login",D="/register",U="/dashboard",A=(a(68),Object(i.e)((function(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.AuthReducer})).username;return r.a.createElement("div",{className:"header flex justify-between items-center bg-blue-300"},r.a.createElement("div",{className:"text-28"},r.a.createElement(s.b,{to:U},"ITS")),r.a.createElement("div",{className:"header_link_container flex text-16"},r.a.createElement("div",{className:"header_link"},"Hi ".concat(a)),r.a.createElement("div",{className:"header_link cursor-pointer",onClick:function(){M.logout(),N()(t),e.history.push("/login")}},"Logout")))}))),B=function(e){return r.a.createElement("div",{className:"navSideBar bg-333"},"asdasd")},G=Object(i.e)((function(e){var t=Object(u.b)();return Object(n.useEffect)((function(){if(e.isLogined){if(!localStorage.getItem("sessionId"))return N()(t),void e.history.push("/login");x.getMyProfile().then((function(e){_(e.data)(t)}),(function(){N()(t),e.history.push("/login")}))}else if(localStorage.getItem("sessionId"))return void e.history.push("/dashboard")}),[]),r.a.createElement("div",{className:"layout min-h-screen flex flex-col"},e.isLogined?r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:"flex flex-grow"},r.a.createElement(B,null),e.children)):e.children)})),R=(a(70),function(e){return r.a.createElement(G,{isLogined:!1},r.a.createElement("div",{className:"auth_layout text-18 flex justify-center items-center w-full h-full min-h-screen bg-blue-400"},r.a.createElement("div",{className:"auth_form mx-auto w-full bg-white rounded"},r.a.createElement("div",{className:"auth_form_title text-blue-600 text-28 inline-block"},e.title),e.children,r.a.createElement(s.b,{className:"auth_bottom_link text-blue-600 text-14 block",to:e.linkTo},e.link),r.a.createElement("span",{className:"main_btn btn-active btn-sm inline-block".concat(e.buttonEnable?"":" disable"),onClick:e.handleSubmit},e.submitButtom))))}),H=a(19),W=a.n(H),F=Object(i.e)((function(e){var t=Object(u.b)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),f=Object(l.a)(i,2),d=f[0],p=f[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),g=h[0],v=h[1],O=Object(n.useState)(""),y=Object(l.a)(O,2),w=y[0],k=y[1],S=function(e){var t=e.target.name,a=e.target.value;switch(t){case"email":s(a);break;case"password":v(a)}},I=function(e){},x=[{name:"email",type:"text",value:c,placeholder:"Email",alertMessage:d},{name:"password",type:"password",value:g,placeholder:"Password",alertMessage:w}];return r.a.createElement(R,{title:"Login",link:"Don't have an account? Sign up now!",linkTo:D,submitButtom:"Login",handleSubmit:function(a){M.login({email:c,password:W()(g)}).then((function(a){var n=a.data;_(n)(t),e.history.push("/dashboard")}),(function(e){switch(e.response.status){case 401:k(E),p("");break;case 404:k(""),p(j);break;default:k(E),p("")}}))},buttonEnable:c&&g},x.map((function(e){return r.a.createElement(m,{key:e.name,name:e.name,type:e.type,onChange:S,value:e.value,placeholder:e.placeholder,alertMessage:e.alertMessage,onblur:I})})))})),J=Object(i.e)((function(e){var t=Object(u.b)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),f=Object(l.a)(i,2),b=f[0],h=f[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),O=v[0],y=v[1],j=Object(n.useState)(""),E=Object(l.a)(j,2),I=E[0],x=(E[1],Object(n.useState)("")),P=Object(l.a)(x,2),T=P[0],N=P[1],C=Object(n.useState)(""),D=Object(l.a)(C,2),U=D[0],A=(D[1],Object(n.useState)("")),B=Object(l.a)(A,2),G=B[0],H=B[1],F=Object(n.useState)(""),J=Object(l.a)(F,2),q=J[0],z=J[1],K=function(e){var t=e.target.name,a=e.target.value;switch(t){case"email":s(a);break;case"password":y(a);break;case"confirm_username":N(a);break;case"username":H(a)}},$=function(){return c?M.verifyEmail(c).then((function(){return h(k),!1}),(function(){return h(""),!0})):(h(""),!1)},Q=function(){return G?M.verifyUsername(G).then((function(){return z(S),!1}),(function(){return z(""),!0})):(z(""),!1)},V=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,Q();case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=9;break}X();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){M.register({email:c,password:W()(O),username:G}).then((function(a){var n=a.data;_(n)(t),e.history.push("/dashboard")}),(function(e){z(w)}))},Y=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.name,e.t0=a,e.next="email"===e.t0?4:"username"===e.t0?6:8;break;case 4:return $(),e.abrupt("break",9);case 6:return Q(),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=[{name:"email",type:"text",value:c,placeholder:"Email",alertMessage:b},{name:"password",type:"password",value:O,placeholder:"Password",alertMessage:I},{name:"confirm_username",type:"password",value:T,placeholder:"Confirm passowrd",alertMessage:U},{name:"username",type:"text",value:G,placeholder:"Username",alertMessage:q}];return r.a.createElement(R,{title:"Register",link:"Already have an account? Log in now!",linkTo:L,submitButtom:"Register",handleSubmit:V,buttonEnable:c&&O&&O===T&&G},Z.map((function(e){return r.a.createElement(m,{key:e.name,name:e.name,type:e.type,onChange:K,value:e.value,placeholder:e.placeholder,alertMessage:e.alertMessage,onblur:Y})})))})),q=function(){return r.a.createElement(G,{isLogined:!0},' "LOGIN_SUCCESS"')};a(73);var z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.a,{path:L,component:F}),r.a.createElement(i.a,{path:D,component:J}),r.a.createElement(i.a,{path:U,component:q}),r.a.createElement(i.a,{path:"/",exact:!0,component:F})))},K=a(12),$=a(38),Q=a.n($),V=a(39),X=a(20),Y="Tasks/FETCH_TASK_SUCCESS";function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ee={tasks:[]};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(X.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne={username:""};var re=Object(K.c)({TasksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Y:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(X.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{tasks:e.tasks.concat(n)});default:return e}},AuthReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case P:return ae({},e,{username:n.username});case T:return ae({},e,{},ne);default:return e}}});var oe=Object(K.e)(re,function(){var e=[V.a,Q.a];return Object(K.d)(K.a.apply(void 0,e))}());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(u.a,{store:oe},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.ab9fb940.chunk.js.map